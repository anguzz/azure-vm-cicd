---
- name: Install Python3, pip3, and numpy on VM
  hosts: vm
  become: yes
  gather_facts: yes

  tasks:

    - name: Ensure python3, pip3, and build dependencies are installed
      apt:
        name:
          - python3
          - python3-pip
          - python3-dev
          - python3-venv
          - python3-setuptools
          - python3-wheel
          - build-essential
          - gfortran
          - libopenblas-dev
          - liblapack-dev
        state: present
        update_cache: yes

    - name: Install system numpy via apt
      apt:
        name: python3-numpy
        state: present

